{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  timeout: 3500,\n  transitionIn: 'fadeIn',\n  transitionOut: 'fadeOut',\n  position: 'topRight',\n  message: 'Please choose a date in the future',\n  messageColor: 'white',\n  backgroundColor: 'red',\n  progressBar: false,\n  close: true,\n});\n\nconst datePicker = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nconst resetBtn = document.querySelector('[data-reset]');\n\nconst timeElements = {};\n['days', 'hours', 'minutes', 'seconds'].forEach(unit => {\n  timeElements[unit] = document.querySelector(`[data-${unit}]`);\n});\n\nstartBtn.disabled = true;\nresetBtn.disabled = true;\n\nlet userSelectedDate;\nlet countdownInterval;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n\n    if (userSelectedDate <= new Date()) {\n      iziToast.show();\n      return;\n    } else {\n      startBtn.disabled = false;\n    }\n  },\n};\n\nflatpickr(datePicker, options);\n\nstartBtn.addEventListener('click', () => {\n  const presentTime = new Date().getTime();\n  const timeDifference = userSelectedDate.getTime() - presentTime;\n\n  if (timeDifference > 0) {\n    startCountdown(timeDifference);\n    resetBtn.disabled = false;\n  } else {\n    iziToast.error();\n  }\n});\n\nfunction startCountdown(timeDifference) {\n  countdownInterval = setInterval(() => {\n    const { days, hours, minutes, seconds } = convertMs(timeDifference);\n    updateTimerDisplay({ days, hours, minutes, seconds });\n    timeDifference -= 1000;\n\n    if (timeDifference < 0) {\n      clearInterval(countdownInterval);\n    }\n  }, 1000);\n\n  resetBtn.addEventListener('click', resetTimer);\n}\n\nfunction resetTimer() {\n  clearInterval(countdownInterval);\n\n  Object.values(timeElements).forEach(element => (element.textContent = '00'));\n\n  resetBtn.disabled = true;\n  datePicker.disabled = false;\n}\n\nfunction addZero(unit) {\n  return unit < 10 ? `0${unit}` : unit;\n}\n\nfunction updateTimerDisplay({ days, hours, minutes, seconds }) {\n  timeElements.days.textContent = addZero(days);\n  timeElements.hours.textContent = addZero(hours);\n  timeElements.minutes.textContent = addZero(minutes);\n  timeElements.seconds.textContent = addZero(seconds);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["iziToast","datePicker","startBtn","resetBtn","timeElements","unit","userSelectedDate","countdownInterval","options","selectedDates","flatpickr","presentTime","timeDifference","startCountdown","days","hours","minutes","seconds","convertMs","updateTimerDisplay","resetTimer","element","addZero","ms"],"mappings":"0IAKAA,EAAS,SAAS,CAChB,QAAS,KACT,aAAc,SACd,cAAe,UACf,SAAU,WACV,QAAS,qCACT,aAAc,QACd,gBAAiB,MACjB,YAAa,GACb,MAAO,EACT,CAAC,EAED,MAAMC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAW,SAAS,cAAc,cAAc,EAEhDC,EAAe,CAAA,EACrB,CAAC,OAAQ,QAAS,UAAW,SAAS,EAAE,QAAQC,GAAQ,CACtDD,EAAaC,GAAQ,SAAS,cAAc,SAASA,IAAO,CAC9D,CAAC,EAEDH,EAAS,SAAW,GACpBC,EAAS,SAAW,GAEpB,IAAIG,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAGrB,GAFAH,EAAmBG,EAAc,GAE7BH,GAAoB,IAAI,KAAQ,CAClCN,EAAS,KAAI,EACb,MACN,MACME,EAAS,SAAW,EAEvB,CACH,EAEAQ,EAAUT,EAAYO,CAAO,EAE7BN,EAAS,iBAAiB,QAAS,IAAM,CACvC,MAAMS,EAAc,IAAI,KAAM,EAAC,QAAO,EAChCC,EAAiBN,EAAiB,QAAO,EAAKK,EAEhDC,EAAiB,GACnBC,EAAeD,CAAc,EAC7BT,EAAS,SAAW,IAEpBH,EAAS,MAAK,CAElB,CAAC,EAED,SAASa,EAAeD,EAAgB,CACtCL,EAAoB,YAAY,IAAM,CACpC,KAAM,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAc,EAClEO,EAAmB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,EACpDL,GAAkB,IAEdA,EAAiB,GACnB,cAAcL,CAAiB,CAElC,EAAE,GAAI,EAEPJ,EAAS,iBAAiB,QAASiB,CAAU,CAC/C,CAEA,SAASA,GAAa,CACpB,cAAcb,CAAiB,EAE/B,OAAO,OAAOH,CAAY,EAAE,QAAQiB,GAAYA,EAAQ,YAAc,IAAK,EAE3ElB,EAAS,SAAW,GACpBF,EAAW,SAAW,EACxB,CAEA,SAASqB,EAAQjB,EAAM,CACrB,OAAOA,EAAO,GAAK,IAAIA,IAASA,CAClC,CAEA,SAASc,EAAmB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC7Db,EAAa,KAAK,YAAckB,EAAQR,CAAI,EAC5CV,EAAa,MAAM,YAAckB,EAAQP,CAAK,EAC9CX,EAAa,QAAQ,YAAckB,EAAQN,CAAO,EAClDZ,EAAa,QAAQ,YAAckB,EAAQL,CAAO,CACpD,CAEA,SAASC,EAAUK,EAAI,CAMrB,MAAMT,EAAO,KAAK,MAAMS,EAAK,KAAG,EAC1BR,EAAQ,KAAK,MAAOQ,EAAK,MAAO,IAAI,EACpCP,EAAU,KAAK,MAAQO,EAAK,MAAO,KAAQ,GAAM,EACjDN,EAAU,KAAK,MAASM,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}